"{ NameSpace: CodingExamples_GUI }"

ApplicationModel subclass:#MeterAndClackDemo
	instanceVariableNames:'meterValue countValue updateProcess'
	classVariableNames:''
	poolDictionaries:''
	category:'examples-GUI-Misc'
!


!MeterAndClackDemo class methodsFor:'interface specs'!

windowSpec
    "This resource specification was automatically generated
     by the UIPainter of ST/X."

    "Do not manually edit this!! If it is corrupted,
     the UIPainter may not be able to read the specification."

    "
     UIPainter new openOnClass:CodingExamples_GUI::MeterAndClackDemo andSelector:#windowSpec
     CodingExamples_GUI::MeterAndClackDemo new openInterface:#windowSpec
     CodingExamples_GUI::MeterAndClackDemo open
    "

    <resource: #canvas>

    ^
     
       #(#FullSpec
          #window: 
           #(#WindowSpec
              #name: 'NewApplication'
              #layout: #(#LayoutFrame 24 0 70 0 323 0 369 0)
              #label: 'NewApplication'
              #min: #(#Point 10 10)
              #max: #(#Point 1280 1024)
              #bounds: #(#Rectangle 24 70 324 370)
              #usePreferredExtent: false
          )
          #component: 
           #(#SpecCollection
              #collection: 
               #(
                 #(#MeterWidgetSpec
                    #name: 'MeterWidget1'
                    #layout: #(#LayoutFrame 45 0 0 0.0 258 0 231 0)
                    #model: #meterValue
                    #label: 'mph'
                )
                 #(#SliderSpec
                    #name: 'Slider1'
                    #layout: #(#LayoutFrame 49 0 259 0 249 0 277 0)
                    #model: #meterValue
                    #orientation: #horizontal
                    #step: 1
                )
                 #(#MeterClackCounterSpec
                    #name: 'MeterClackCounter1'
                    #layout: #(#Rectangle 104 217 200 249)
                    #model: #countValue
                    #backgroundColor: #(#Color 49.9992 49.9992 100.0)
                )
              )
          )
      )
! !

!MeterAndClackDemo methodsFor:'aspects'!

countValue
    "automatically generated by UIPainter ..."

    "*** the code below creates a default model when invoked."
    "*** (which may not be the one you wanted)"
    "*** Please change as required and accept in the browser."

    |tmp valueHolder|

    countValue isNil ifTrue:[
        countValue :=  ValueHolder new value:0.
    ].


    ^ countValue.

!

meterValue
    "automatically generated by UIPainter ..."

    "*** the code below creates a default model when invoked."
    "*** (which may not be the one you wanted)"
    "*** Please change as required and accept in the browser."

    meterValue isNil ifTrue:[
        meterValue :=  0 asValue.
    ].

    ^ meterValue.



! !

!MeterAndClackDemo methodsFor:'hooks'!

closeDownViews
    "start a process to increment the clack-counter"

    updateProcess notNil ifTrue:[
        updateProcess terminate.
        updateProcess :=nil
    ].

    super closeDownViews.

!

postOpenWith:aBuilder
    "start a process to increment the clack-counter"

    super postOpenWith:aBuilder.

   updateProcess := [
       [true] whileTrue:[
           Delay waitForMilliseconds:((100 - self meterValue value) max:0).
           self meterValue value ~~ 0 ifTrue:[
               self countValue value:(self countValue value + 1).
           ]
       ]
   ] fork
! !

!MeterAndClackDemo class methodsFor:'documentation'!

version
    ^ '$Header: /cvs/stx/stx/clients/Demos/MeterAndClackDemo.st,v 1.2 1998-09-09 09:36:18 cg Exp $'
! !
