<HTML>
<HEAD>
  <TITLE>Find a telephone number</TITLE>

  <SCRIPT language="smalltalkScript">

	!methods!

	findNumberInDB
	    |name phone db homeDir phoneDataBase message|

	    name := window document forms entryForm nameField contents.
	    name withoutSeparators isEmpty ifTrue:[^ self].

	    homeDir := OperatingSystem getHomeDirectory.
	    phoneDataBase := homeDir asFilename construct:'.phone.db'.

	    db := PersistencyManager readOnlyFile:phoneDataBase pathName.
	    (db includesKey:name) ifTrue:[
		phone := db at:name.

		window document forms outputForm numberField contents:phone.
		message := ''.
	    ] ifFalse:[
		window view device beep.
		message := ('No entry for ' , name , '.') 
				asText
				emphasizeAllWith:(Array with:#color->Color red
							with:#bold)
	    ].
	    db release.
	    window view showInfo:message.
	!

	start
	    window document forms outputForm numberField disable.
	! !

  </SCRIPT>
</HEAD>


<BODY>
  <H1>Find phone number</H1>

    <TABLE>
     <FORM NAME=entryForm ONSUBMIT="findNumberInDB">
     <TR>
       <TH> Name:          <TD>  <INPUT SIZE=40 NAME="nameField">
     <TR>
       <TD ALIGN=left><INPUT TYPE="button" VALUE="show ..." onclick="findNumberInDB">
     </FORM>
     <FORM NAME=outputForm>
     <TR>
       <TH> Number:        <TD>  <INPUT SIZE=40 NAME="numberField"> 
     </FORM>

    </TABLE>
</BODY>

<HR>
  <A HREF="TOP.html">back to main menu</A>
</HTML>


