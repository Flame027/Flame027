<HTML>

<HEAD>
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Smalltalk/X Online Documentation - Installation</Title>
</HEAD>

<BODY>

<A NOPRINT HREF="../TOP.html" INFO="Back to documentation's main page" > <IMG SRC="../../icons/DocsUpArrow.gif" ALT="[up]"></A>

<H1>Installing Smalltalk/X</H1>

<H2><A NAME="INDEX">Index</A></H2>

<UL>
<LI><A NAME="I_INTRODUCTION"   HREF="#INTRODUCTION">Introduction</A>
<LI><A NAME="I_AUTOMATIC"      HREF="#AUTOMATIC">Installation</A>
<LI><A NAME="I_PACKAGES"       HREF="#PACKAGES">Delivered Package</A>
<LI><A NAME="I_FILES"          HREF="#FILES">Files and Directories as on the Delivery Medium</A>
<LI><A NAME="I_TAPEREADING"    HREF="#TAPEREADING">Reading the Delivery Medium</A>
<!--
<LI><A NAME="I_DEFAULTSETUP"   HREF="#DEFAULTSETUP">The Default Installation Procedure</A>
-->
<LI><A NAME="I_PRIVATEINSTALL" HREF="#PRIVATEINSTALL">Installing Files for a Single User</A>
<LI><A NAME="I_GROUPINSTALL"   HREF="#GROUPINSTALL">Installing Files for Group Usage</A>
<LI><A NAME="I_STARTUP"        HREF="#STARTUP">Startup Actions</A>
<LI><A NAME="I_QUICK"          HREF="#QUICK">Summary for the Impatient</A>
</UL>


<H2><A NAME="INTRODUCTION" HREF="#I_INTRODUCTION">Introduction</A></H2>

This document describes details of the contents of the <CITE>ST/X</CITE>
distribution and gives more background information
on the installation procedure.

<H2><A NAME="AUTOMATIC" HREF="#I_AUTOMATIC">Installation</A></H2>

<P>
<CITE>ST/X</CITE> is delivered as archive; either in "tgz" (tar-compressed) or
in "zip" format. For all Unix systems, including Linux, two archives are required:
one containing
all the files which are common to all unices (mostly sources and configuration files),
and another one containing the architecture-specific binaries.
For MS-Windows everything is contained in a single archive.
<P>
Due to the different line-end-conventions, the common file used for unix should not be unpacked into
a windows system, and vice versa.
<P>

No real installation is required: simply unpack the whole archive(s) somewhere on your
system.




<H2><A NAME="PACKAGES" HREF="#I_PACKAGES">Delivered Package</A></H2>

<BR>
The delivery includes all classes in both source and machine compiled form (class libraries),
the <VAR>stc</VAR> (Smalltalk to C compiler) as a binary only,
Makefiles and scripts to recompile the system in part or as a whole,
demonstration code, examples and finally an executable Smalltalk system.
<BR>
The executable has been generated by linking all compiled classes into a number of
shared libraries which are loaded by the "stx" program.
The executable enables incremental development of classes and/or applications,
which can either be executed within this environment or compiled down to machine code
for binary class libraries or standalone executables.
<P>
The license allows for commercial use with some minor exceptions, regarding military use.
<P>




<H2><A NAME="FILES" HREF="#I_FILES">Files and Directories as on the Delivery Medium</A></H2>

After unpacking, you will find the following directories:
<UL>
<LI><CODE>stx</CODE>
<BR> the <VAR>TOP</VAR> directory (i.e. where you extracted the tape)
<P>
<LI><CODE>stx/configurations</CODE>
<BR> contains makefile templates for various unix configurations
<P>
<LI><CODE>stx/doc</CODE>
<BR> contains all documentation files and literature
<P>
<LI><CODE>stx/doc/online</CODE>
<BR> contains all online documentation files
<P>
<LI><CODE>stx/doc/online/english</CODE>
<BR> the stuff you are reading right now
<P>
<LI><CODE>stx/doc/books</CODE>
<BR> public domain literature on Smalltalk
<P>
<LI><CODE>stx/stc</CODE>
<BR> contains the Smalltalk-to-C (<VAR>stc</VAR>) compiler.
Notice, that the sources of the compiler are not part of the distribution.
<P>
<LI><CODE>stx/include</CODE>
<BR> contains some common include files needed for compilation.
<P>
<LI><CODE>stx/librun</CODE>
<BR> contains the runtime library.
This includes startup,
memory management, symbol table management and method lookup.
For historical reasons, some refer to this as <VAR>Virtual Machine</VAR>
(or simply <VAR>VM</VAR>).
Notice that the source of those functions is not provided.
<P>
<LI><CODE>stx/libbasic</CODE>
<BR> contains the
<A HREF="../overview/basicClasses/TOP.html">basic classes</A>.
These make up the base of the class library, including most collections,
streams, process support, magnitude classes and the metaclass/class hierarchy.
Most of the stuff as described by the Smalltalk-ANSI standard is found here.
The directory contains both the ST-source files (as generated by fileOut
or as checked out from a source repository) and the generated binary class library
as a single binary dll (shared library). The dll contains machine code - not bytecode.

<P>
<LI><CODE>stx/libbasic2</CODE>
<BR> contains additional (less frequently used) basic classes,
consisting of additional collection classes, streams, printer support,

<P>
<LI><CODE>stx/libbasic3</CODE>
<BR> contains additional non-GUI related classes, which are required
for program development. You may want to link end user applications
without these classes for slightly reduced memory requirements and executable
size.

<P>
<LI><CODE>stx/libboss</CODE>
<BR> contains the binary object storage persistency code.
This allows for arbitrary object hierarchies to be marshalled and unmarshalled.

<P>
<LI><CODE>stx/libcomp</CODE>
<BR> contains the incremental bytecode compiler and support classes,
required to parse and/or execute Smalltalk code.
<BR>
Commercial end-user application may include these classes, but may not
provide an endUser interface to the Smalltalk system itself - i.e.
the endUser may not write Smalltalk code directly through a browser
or browserLike interface.

<P>
<LI><CODE>stx/libcompat</CODE>
<BR> compatibility code. Mostly dummy classes to simulate other Smalltalk systems.
This is helpful if you want to import code written for Dolphin- or VisualAge Smalltalk.
Notice, that the code found there is far from being a complete compatibility layer for
code originating from other dialects. Usually you will only find empty class stubs
which allow for loaded code to find at least a valid superclass when loading.
Usually, additional code massage is needed to bring in code from other dialects.

<P>
<LI><CODE>stx/libdb</CODE>
<BR> Database interfacing classses.

<P>
<LI><CODE>stx/libdb/libodbc</CODE>
<BR> ODBC interfacing classses.

<P>
<LI><CODE>stx/libdb/liboracle</CODE>
<BR> Oracle interfacing classses.

<P>
<LI><CODE>stx/libdb/libsqlite</CODE>
<BR> SQlite interfacing classses.

<P>
<LI><CODE>stx/libdb/nosql</CODE>
<BR> More (not-only SQL and non-SQL) database support.

<P>
<LI><CODE>stx/libdb/nosql/cassandra</CODE>
<BR> Cassandra DB support.

<P>
<LI><CODE>stx/libhtml</CODE>
<BR> contains an old version of the HTML parser, viewer, printer and support classes.
This is a very old and limited HTML framework, which is oly used for the online
documentation and to render simple help dialogs.
For your own projects, please refer to the "goodies/webServer/htmlTree" package.

<P>
<LI><CODE>stx/libview</CODE>
<BR> contains low level graphics interface and support classes,
such as display interfacing, basic windows and display resource representations
for fonts, cursors, colors etc. Some of the classes here are specific for
a particular graphic architecture (i.e. WinWorkstation, XWorkstation).

<P>
<LI><CODE>stx/libview2</CODE>
<BR> contains medium level support classes for graphics interfacing,
such as a Model and ApplicationModel hierarchies, adaptors and various bitmap image file readers.

<P>
<LI><CODE>stx/libwidg</CODE>
<BR> contains
<A HREF="../overview/gui/TOP.html">widget classes</A> (higher level views)
Most of the GUI elements are found here, such as Buttons, ScrollBars,
TextViews etc.
All of the GUI components are written in pure Smalltalk, there are no
dependencies to the underlying graphic hardware or architectory.
<P>

<LI><CODE>stx/libwidg2</CODE>
<BR> contains additional widgets (less frequently used)
<P>

<LI><CODE>stx/libwidg3</CODE>
<BR> contains even more (and even less frequently used) additional widgets
<P>

<LI><CODE>stx/libtool</CODE>
<BR> contains the
<A HREF="../tools/TOP.html">programming tools</A>, browsers, inspectors and debugger.
<BR>You may want to link end user applications
without these classes for slightly reduced memory requirements and executable
size. Some of those tools are quite old and have been obsoleted by modern versions in lobtool2.

<P>
<LI><CODE>stx/libtool2</CODE>
<BR> contains additional (usually improved) tools
and all the
<A HREF="../tools/TOP.html">GUI builder programming tools</A>, which includes
a windowPainter, a menu builder and a dataSet definition tool.
It also includes the new, advanced system browser.
<BR>End user applications are typically linked
without those classes for slightly reduced memory requirements and executable
size.

<P>
<LI><CODE>stx/libui</CODE>
<BR> contains all support classes for applications
which were built using the GUI builder tools.
<BR>
If the end user application is non-graphical, or its GUI is built
programatically (as opposed to been built using the windowPainter),
it can be linked without those classes for slightly reduced memory requirements and executable
size.

<!--
<P>
<LI><CODE>stx/libxt</CODE>
<BR> contains experimental classes to allow
wrapping Xt (X toolkit) widgets and
have them (optionally) play their game
in an <CITE>ST/X</CITE> view.
<BR>These classes are not required or used by <CITE>ST/X</CITE>.
However, they provide a framework for incorporating existing Xt or Motif
widgets.
<BR>
These classes & libraries are provided for demonstration purposes
<BR>(i.e. no warranty and support).
-->

<!--
<P>
<LI><CODE>stx/libsnmp</CODE>
<BR> contains experimental classes for SNMP communication.
Only the client side is implemented.
<BR>
These classes & libraries are provided for demonstration purposes
<BR>(i.e. no warranty and support).
-->

<P>
<LI><CODE>stx/libjavascript</CODE>
<BR> contains a JavaScript to Smalltalk-bytecode translator.
The language is not JavaScript proper, as it only implements JavaScript
syntax, not the JavaScript object model.
The object model is still the one of the underlying Smalltalk engine.
<BR>
There exists quite some support for this language in the other ST/X tools,
to make it possible to write and debug JS code in the browser/debugger in an
almost seamless manner.

<P>
<LI><CODE>stx/libjava</CODE>
<BR> contains the Java language framework, which allows for binary Java
code to be loaded and executed within the system.
Notice that the ST/X VM is actually a unified Smalltalk/Java virtual machine,
which can execute Java bytecode directly.
<BR>
Although there already exists a lot of suport this language in the other ST/X tools,
this is still considered to be in an unfinished state, and currently being actively developped.

<P>
<LI><CODE>stx/support</CODE>
<BR> support C libraries.
<BR>
You will find additional (C-) libraries there, which are used by
some optional Smalltalk classes. For example, the 3D GL library, jpg support,
the bzip libraries and ctags (for the file browser) are found there.
Some of these have been taken from the public domain,
and those are not part of the <CITE>ST/X</CITE> license
(i.e. their (re-)distribution and use might be covered by different conditions).
<BR>
All of those files are also available through various FTP cites - they have been
included in the distribution to make your life easier.


<P>
<LI><CODE>stx/clients</CODE>
<BR> example programs. The name clients is a bit historical (coming from the X-window worlds
naming for server-clients). Programs with a GUI are found here.

<P>
<LI><CODE>stx/goodies</CODE>
<BR> various goodies and additional frameworks - both specific for <CITE>ST/X</CITE> and ported public
domain or freeware classes.
You will find math packages, monticello support, a webServer, xml, soap and wsdl
support, and many other packages here. Most of them can be loaded into the system
using "Smalltalk loadPackage:'stx:goodies/xxx".
Also, a partial copy of the manchester goodie library is found here.

<P>
<LI><CODE>stx/contrib</CODE>
<BR> contributed software

<P>
<LI><CODE>stx/contrib/libPVM</CODE>
<BR> contains experimental classes for PVM communication.
<BR>
These classes & libraries were provided for demonstration purposes by customers and users of ST/X,
and are not maintained.
<BR>(i.e. no warranty and support).

<P>
<LI><CODE>stx/projects</CODE>
<BR> historically, this used to be the top directory for projects, but now
only "projects/smalltalk" is of any interest. You should no longer place you own
projects under this directory.

<P>
<HR>
<LI><CODE>stx/projects/smalltalk</CODE>
<BR>The Smalltalk executable will be created in this directory by the Makefile(s).
<P>

<LI><CODE>stx/projects/helloWorld</CODE>
<BR>A small non-GUI application, demonstrating how to compile and link
a minmal standAlone program.
<P>

<LI><CODE>stx/projects/helloMicroWorld</CODE>
<BR>Absolutely minimalist non-GUI application. Does not use the standard Smalltalk library,
but instead defines its own Object and String classes, which only contain what is needed there.
<P>
</UL>

<P>


<H2><A NAME="TAPEREADING" HREF="#I_TAPEREADING">Reading the Delivery Medium</A></H2>

The first step in your installation is to verify that enough disk space is
available. A full installation requires approx. 300-500Mb of disk space
(the full amount is only required while the system is recompiled,
some of the intermediate object files can be removed later).
<P>
An installation consisting of the source files and the resulting class libraries
only (as contained on the distribution medium)
requires approx. 200 Mb of disk space.
<P>

Create a new directory where the files should go, and change into it.
<CODE><PRE>
	mkdir stxXXX
	cd stxXXX
</PRE></CODE>
Replace XXX by the release-number; currently, this would be release 6.2.3,
therefore "stx623" is a good name.

In the following description, we call this directory "<VAR>TOP</VAR>".
<P>
<UL>
<LI>If you are using the Unix version of <CITE>ST/X</CITE>, extract with:
<CODE><PRE>
	tar xfv common.tgz
	tar xfv &lt;system-name&gt;.tgz
</PRE></CODE>
After that, the tar files can be removed. They are no longer needed.

<P>
<LI>Under the MS-Windows system, unpack the zip file as appropriate.
</UL>



<!--
<H2><A NAME="DEFAULTSETUP" HREF="#I_DEFAULTSETUP">The Default Installation Procedure</A></H2>

The default installation procedure (a shell script named: <CODE>"INSTALL"</CODE>)
installs the components into two directories: a binary directory, where
the <CITE>smalltalk</CITE> and <CITE>stc</CITE> executables are installed,
and a lib directory, where all the rest is placed (most files are placed
into subdirectories of the lib-directory).
<P>
The default installation only installs the libraries required to execute
Smalltalk - it does NOT install a complete development tree, which is required
to rebuild the system or to build a new Smalltalk executable.
<P>
The resulting installation can be used by multiple users - however, make
certain, that the shared sources, executables etc. are made readOnly to
non-administrators, and that different directories are used by the users
(since each has to maintain its own changes file, for example).
<P>
-->



<H2><A NAME="PRIVATEINSTALL" HREF="#I_PRIVATEINSTALL">Installing Files for a Single User</A></H2>

If only one person is going to use <CITE>ST/X</CITE>, your installation is
already complete when all files have been extracted
from the distribution medium.
<BR>
To start it, execute:
<BLOCKQUOTE>
<KBD>
cd <VAR>TOP</VAR>/projects/smalltalk
<BR>
smalltalk (or "stx", for short)
</KBD>
</BLOCKQUOTE>
On some Unix machines, you may get an "stx not found" error message.
Then either add "." to your PATH, or type "./stx" instead.

<H2><A NAME="GROUPINSTALL" HREF="#I_GROUPINSTALL">Installing Files for Group Usage</A></H2>

<CITE>ST/X</CITE>, as delivered lives in its own directory,
and does not need any files to be added to system directories.
Especially, no dlls need to be added to the standard "windows" folder.
<BR>
However, if more than one person are going to use <CITE>ST/X</CITE>,
it is useful to install the common files in some standard places,
and have the private files per-user.
This not only saves valuable disk space, but also makes administration
and distribution of new code and classes easier.
<BR>
For most file accesses within <CITE>ST/X</CITE>, it uses a searchpath
(i.e. a list of directory names in which files are searched),
allowing users to override definitions and settings.
<BR>
<A NAME="DEFAULT_SEARCHPATH">By default, the path looks like:</A>

<BLOCKQUOTE>
<CODE>
    .
<BR>
    <VAR>$HOME</VAR>/.smalltalk
<BR>
    <VAR>$STX_LIBDIR</VAR>
<BR>
    /usr/local/lib/smalltalk
<BR>
    /usr/lib/smalltalk
</CODE>
</BLOCKQUOTE>
where <VAR>$HOME</VAR> is your login directory and <VAR>$STX_LIDIR</VAR>
is a shell environment variable which can be left undefined.
<BR>
Files are searched for in those directories, in the above order
<A NAME="BACKNOTE1" HREF="#NOTE1">(*)</A>.
<P>
For example, a personal startup-script <CODE>"smalltalk.rc"</CODE> can be
put into <CODE>"</CODE><VAR>HOME</VAR><CODE>/.smalltalk/smalltalk.rc"</CODE>.
<BR>
Since <VAR>$HOME</VAR> comes before "<CODE>/usr/local/lib/smalltalk</CODE>"
in the searchpath, <CITE>ST/X</CITE> will consult this private file;
even if some other <CODE>"smalltalk.rc"</CODE> file exists there.
<P>
There are rare situations, in which the above searchpath is not adequate for
a particular setup. Therefore, the searchpath can also be initialized
from a shell variable named "<VAR>STX_SEARCHPATH</VAR>". If defined, it should
contain a colon-separated list of directory names. However, it does not affect the
builtin searchpath for VM required files - especially the "<CODE>symbols.stc</CODE>" file.
<P>
To install the system into some standard place
(usually <CODE>"/usr/local/lib"</CODE>
or <CODE>"/usr/lib"</CODE>),
you should create the following directories:
<BLOCKQUOTE>
<CODE>
	/usr/local/lib/smalltalk
<BR>
	/usr/local/lib/smalltalk/source
<BR>
	/usr/local/lib/smalltalk/resources
<BR>
	/usr/local/lib/smalltalk/bitmaps
<BR>
	/usr/local/lib/smalltalk/include
<BR>
	/usr/local/lib/smalltalk/doc
</CODE>
</BLOCKQUOTE>

and copy the files from corresponding subdirectories
found in <CODE>"projects/smalltalk"</CODE> to those new directories.
Also, all files ending in <CODE>".rc"</CODE> should be copied to this
new directory.
<P>
You can also create symbolic links in those directories to
point to the files found under your actual TOP.
<BR>
(don't symlink to the directories;
many system's <CODE>chdir</CODE> command gets a bit confused when
changing back to <CODE>".."</CODE> from a symlinked directory.)
<P>
The <CITE>ST/X</CITE> executable itself should go to
<CODE><PRE>
	/usr/local/bin/smalltalk
</PRE></CODE>
or any other directory in your path.
Alternatively, create a symbolic link, or adjust your <VAR>$PATH</VAR>
variable to have its directory included.
<P>
If you do not have access to <CODE>"/usr/local/lib"</CODE>, you can also
put the stuff into any directory you like, <STRONG>and</STRONG> set the shell-variable
<VAR>$STX_LIBDIR</VAR> to the name of that directory.
<P>
Thus, your global directory should look like:
<BLOCKQUOTE>
<CODE>
	.../source
<BR>
	.../source/*.st
<BR>
	.../resources
<BR>
	.../resources/*.rs
<BR>
	.../resources/*.style
<BR>
	.../include
<BR>
	.../include/symbols.stc <A HREF="#NOTE2" NAME="BACKNOTE2">(**)</A>
<BR>
	.../bitmaps
<BR>
	.../bitmaps/*.xbm
<BR>
	.../fileIn/...
<BR>
	.../doc/coding
<BR>
	.../doc/misc
<BR>
	.../doc/...
<BR>
	.../smalltalk.rc
<BR>
	.../smalltalk_r.rc
<BR>
	.../display.rc
<BR>
	.../host.rc
<BR>
	.../d_*.rc
<BR>
	.../h_*.rc
<BR>
	.../abbrev.stc
<BR>
	.../patches
</CODE>
</BLOCKQUOTE>
and (if <CODE>"..."</CODE> is not one of <CODE>"/usr/lib/smalltalk"</CODE> or
<CODE>"/usr/local/lib/smalltalk"</CODE>) the shell environment should contain
a variable named <VAR>STX_LIBDIR</VAR>, which is set to whatever <CODE>"..."</CODE> is.
<P>
Since compiled code does not include the source code itself,
but instead a reference (filename & position) to it,
an incorrect installation will lead to no source code being shown
in the browser
(the <CODE>"smalltalk.rc"</CODE>-script which is described below does a quick check and gives a warning).
<P>
Also, please do not manually edit the source files themselfes -
you will make the position-information in compiled code invalid,
and therefore see funny source code (parts only) in the browser.
<P>
The free demo package does not include all sources - some stuff is only
avaliable in the non-free release. Therefore some methods source
will not be visible in the browser's - even with a correct installation.



<H2><A NAME="REBUILDING" HREF="#I_REBUILDING">Building your own Smalltalk</A></H2>

In order to create your own Smalltalk exeutable,
which may be linked with additional (or less) precompiled classes,
we recommend the following procedure:
<UL>
<LI>recursively copy the whole directory hierarchy to a save place (make a copy)
<LI>change to that directory
<LI>type <CODE>"make target"</CODE>(on unix) or <CODE>"bmake"</CODE> (on windows)
<LI>go for a coffee break
<LI>test the new executable in <CODE>"projects/smalltalk"</CODE>
</UL>

You may build executables with many classes left out, if these are seldom used
at your site - either by modifying individual <CODE>"Make.proto"</CODE> files
(to change the set of classes in a classLibrary),
or by changing the package list (to change the set of classLibraries which are
included in the initial executable).
(Package definitions for common configurations are found in
<CODE>"configurations/PACKS"</CODE>).
<P>
<CITE>ST/X</CITE> can execute with a much smaller set of initial classes
(even most of the user interface classes can be left out) -
due to the autoload mechanism, missing classes will be loaded on demand and
installed as bytecode interpreted code.
<BR>
Of course, this slows down the initial startup. However, the loading will be done
only once, since after a snapshot restart, the image will already contain them.




<H2><A NAME="STARTUP" HREF="#I_STARTUP">Startup Actions</A></H2>

During startup, <CITE>ST/X</CITE> reads a file called <CODE>"smalltalk.rc"</CODE> to
setup some internal stuff. Since the search for this file is done
using the above path, you can put your private <CODE>"smalltalk.rc"</CODE> into
either the current directory or <CODE>"<VAR>HOME</VAR>/.smalltalk"</CODE>.
<P>
This script contains Smalltalk expressions which will first do some
display-specific setup
(by executing <CODE>"display.rc"</CODE>),
followed by host-specific setup (executing <CODE>"host.rc"</CODE>),
and (if present) private definitions from <CODE>"private.rc"</CODE>.
<BR>
Finally it launches some default applications (currently the
<A HREF="../tools/misc/TOP.html#TRANSCRIPT">Transcript</A>
and
<A HREF="../tools/misc/TOP.html#LAUNCHER">Launcher</A>).
You can of course add more to this
(for example, if you like to arrange for a systemBrowser to come
 up automatically).
<BR>
<CODE>"display.rc"</CODE> tries to find out the kind of display hardware
you are working with and then executes one of the
<CODE>"d_<VAR>xxx</VAR>.rc"</CODE>
scripts.Have a look at <CODE>"display.rc"</CODE> to see how this is done.
<BR>
Some display specific scripts are already provided with the system,
but you can add your own ones, if you are not happy with those settings.
However, please leave the existing <CODE>"d_<VAR>xxx</VAR>.rc"</CODE>-files
unmodified -
better add your own new, and call it <CODE>"d_<VAR>displayname</VAR>.rc"</CODE>.
Your new <CODE>"d_<VAR>xxx</VAR>.rc"</CODE> file should set your personal preferences,
such as view-look and keyboard mappings
(use <CODE>"d_sample_display.rc"</CODE> as a guide).
Also, keyboard mappings are set up in both <CODE>"display.rc"</CODE> and
the individual <CODE>"d_xxx.rc"</CODE> files.
For example, national keyboard variants are set there.
<P>
The same strategy is used for host specific setup,
which consists mainly of printer setup.
<CODE>"host.rc"</CODE> tries to find out, what host you are running on
(which is NOT always the same as the display in X).
Like with the display files, you should leave the existing host
files untouched and add a new one, called <CODE>"h_<VAR>hostname</VAR>.rc"</CODE>.
Use <CODE>"h_sample_host.rc"</CODE> as a guide.
<P>
The other startup script <CODE>"smalltalk_r.rc"</CODE> is consulted, when
a snapshot image is restarted; it also does the display and host
setup but does not launch any new applications.
Thus, the existing views will reopen after restart, but the look may be
different, if started with another <VAR>DISPLAY</VAR> setting.
<P>
Summary, startup actions:
<UL>
<LI>initialize all classes (send <CODE>#initialize</CODE> to each)
<LI>read a file named <CODE>"patches"</CODE> (if present)
<LI>read <CODE>"smalltalk.rc"</CODE>
<BR>
which in turn:
  <UL>
  <LI>reads <CODE>"display.rc"</CODE>
<BR>
    <UL>
    <LI>setup common keyboard shortcut commands and mappings
    <LI> figures out the type of display, and reads <CODE>"d_xxx.rc"</CODE>
    </UL>
  <LI>reads <CODE>"host.rc"</CODE>
    <UL>
    <LI> figures out the type of host, and reads <CODE>"h_xxx.rc"</CODE>
    </UL>
  <LI>reads <CODE>"private.rc"</CODE>
  <LI>start some default views (
<A HREF="../tools/misc/TOP.html#TRANSCRIPT">Transcript</A>
and
<A HREF="../tools/misc/TOP.html#LAUNCHER">Launcher</A>).
  </UL>
</UL>
<P>
Please read the document on
``<A HREF="../custom/TOP.html">configuration and customization</A>''
for details on how to change <CITE>ST/X's</CITE> settings to meat your personal
preferences.
<P>
Hint:
<BLOCKQUOTE>
  the above mentioned search-path is valid for all files used
  and read by <CITE>ST/X</CITE>. The order allows both sharing of startup
  files and individual setups both per user and per project.
<BR>
  For example, you can put global default scripts into
  <CODE>"/usr/local/lib"</CODE>, workgroup specific files into
  <CODE>"<VAR>STX_LIBDIR</VAR>"</CODE>, user private things into each users
  <CODE>"<VAR>HOME</VAR>/.smalltalk"</CODE> and finally project specifics into individual
  subdirectories.
<BR>
  Since bitmaps and resource files are too found along that path,
  you can even define your private bitmaps (for example: icons), by
  creating a <CODE>"bitmaps"</CODE> directory somewhere in the path and putting your
  own bitmap files there (most view classes use their abbreviated class name and
  append <CODE>".xbm"</CODE> to construct the name of the icon bitmap file).
</BLOCKQUOTE>
<P>
Hint:
<BLOCKQUOTE>
  actually the above was not completely correct: the name of the
  startup script is <CODE>"<VAR>executable-name</VAR>.rc"</CODE>
  - not strictly <CODE>"smalltalk.rc"</CODE>.
  Thus, you can create an application by simply linking to the Smalltalk
  executable, call it "<VAR>whatever</VAR>" and create a corresponding <CODE>"<VAR>whatever</VAR>.rc"</CODE>.
<P>
  Of course, if you have a full distribution (including the <VAR>stc</VAR>-compiler)
  you can also create stand alone executables.
<BR>
However, using the same executable for multiple applications (customized by
startup scripts) is not as stupid as it may look at first: all
UNIX systems share  the physical memory
of the text space if multiple processes execute the same
program. Therefore, all running Smalltalk
processes will use the same physical memory containing the code.
<BR>
Especially in multiuser
setups, this may lead to a much better memory utilization than creating
multiple standalone applications.
(BTW: on Ultrix, this is the reason for those monster executables found in "/usr/bin/X11" ;-)
<BR>
For systems which support shared libraries, the same is true on
a finer grain level: here individual class libraries
share their memory.
<P>
The above is - of course - only valid for the text segment (i.e.
for statically compiled machine instructions).
Interpreted bytecode (and also: on the fly generated machine code)
has to be placed into the data space. Unless special tricks are used,
these data segments are not shared.
<BR>
</BLOCKQUOTE>
<P>

<H2>Notes</H2>
<A NAME="NOTE1" HREF="#BACKNOTE1">(*) Searchpath</A>
<BR>
The searchpath is kept in a class variable of the <CODE>ST</CODE>
class (<CODE>SystemPath</CODE>) and can be accessed via class methods.
You can add components to the path or change it completely from your startup file
<CODE>"smalltalk.rc"</CODE> or <CODE>"private.rc"</CODE>.
Obviously, the startup file itself must be found in the initial (default)
searchpath to do that.
<P>

<A NAME="NOTE2" HREF="#BACKNOTE2">(**) symbol file</A>
<BR>
This file is not required for all architectures - in those that do require
it, <CITE>ST/X</CITE> will NOT work without it or if it is corrupted
<BR>
(so, <STRONG>never</STRONG> change or remove it).
<BR>
Also, since this file is read by the VM during early startup time
(before any Smalltalk objects exist), a builtin searchpath
is used for it (i.e. the setting of the above described searchPath
class variable has no effect).
<BR>
The builtin searchpath for the symbols file is:
<CODE><PRE>
	./include/symbols.stc
	$SMALLTALK_LIBDIR/include/symbols.stc
	$STX_LIBDIR/include/symbols.stc
	/usr/local/lib/smalltalk/include/symbols.stc
	/usr/lib/smalltalk/include/symbols.stc
	/opt/smalltalk/include/symbols.stc
</PRE></CODE>
for Unix, and:
<CODE><PRE>
	.\include\symbols.stc
	$SMALLTALK_LIBDIR\include\symbols.stc
	$STX_LIBDIR\include\symbols.stc
	\Programme\eXept\SmalltalkX\include\symbols.stc
	\Programs\eXept\SmalltalkX\include\symbols.stc
	\Programme\SmalltalkX\include\symbols.stc
	\Programs\SmalltalkX\include\symbols.stc
	\SmalltalkX\include\symbols.stc
</PRE></CODE>
for MS-Windows systems.


<H2><A NAME="QUICK" HREF="#I_QUICK">Summary for the Impatient</A></H2>

For the impatient, the following summarizes the installation procedure:
<P>
Unix:
<CODE><PRE>
	mkdir stx623
	cd stx623
	tar xvf <VAR>nameOfArchitectureTarFile</VAR>
	tar xvf <VAR>nameOfCommonTarFile</VAR>
</PRE></CODE>

follow this by a quick smoke test:
<CODE><PRE>
	cd stx/projects/smalltalk
	./stx
</PRE></CODE>
<P>

Windows:
<CODE><PRE>
	mkdir stx623
	cd stx623
	unzip <VAR>nameOfZipFile</VAR> (or use Windows Explorer to unzip)
</PRE></CODE>

follow this by a quick smoke test:
<CODE><PRE>
	cd stx\projects\smalltalk
	stx
</PRE></CODE>

<P>
Mac-OSX:
<CODE><PRE>
	<VAR>mount stx.dmg</VAR> (double click in the finder)
	<VAR>copy stx.app from the mounted drive to the destination</VAR>
</PRE></CODE>
<P>


<HR>
<P>
<IMG NOPRINT ALIGN=middle SRC="../../icons/stx.gif" ALT="[stx-logo]">
<BR>Copyright &copy; 1996 Claus Gittinger Development & Consulting
<BR>Copyright &copy; 1996 eXept Software AG
<P>
<ADDRESS>
<tt>&lt;<a href="mailto:cg@exept.de">cg@exept.de</a>&gt;</tt>
</ADDRESS>

<HR>
Doc $Revision: 1.36 $ $Date: 2016-11-04 00:19:00 $

</BODY>
</HTML>
